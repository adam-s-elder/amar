s <- diag(5)
bb <- 1:5
sweep(s, 2, bb, "+")
sweep(s, 1, bb, "+")
sweep
match.fun("+")
level_2_boot
mult_bootstrap <- function(data, ifc, sims_1, sims_2, norms = c("max")){
num_obs <- nrow(data)
my_data <- data
param_est_vals <- est_spearman(my_data)
ic_ests <- est_influence_spearman(my_data)
level_1_boot <- gen_boot_sample(sims_1, ic_ests, param_est_vals)
test_res <- matrix(NA, nrow = sims_1, ncol = length(norms))
for(boot_ndx in 1:sims_1){
level_2_boot <- gen_boot_sample(sims_2, ic_ests, level_1_boot[boot_ndx, ])
test_res[boot_ndx, ] <- test_one_lp_2(level_2_boot, norms = norms)
}
l_p_pows <- apply(test_res, 2, mean)
return(l_p_pows)
}
sum_data_cov[1, 2:5] <- sum_data_cov[2:5, 1] <- 0.2
sum_data_cov_5 <- sum_data
sum_data_cov[1, 2:6] <- sum_data_cov[2:6, 1] <- 0.2
sum_data_cov_5 <- sum_data
sum_data_cov_5 <- sum_data_cov
sum_data_cov[1, 2:11] <- sum_data_cov[2:11, 1] <- 0.2
sum_data_cov_10 <- sum_data_cov
sum_data_cov[1, 2:26] <- sum_data_cov[2:26, 1] <- 0.2
sum_data_cov_25 <- sum_data_cov
sum_data_cov[1, 2:51] <- sum_data_cov[2:51, 1] <- 0.2
sum_data_cov_50 <- sum_data_cov
sum_data_5 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_5)
sum_data_10 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_10)
sum_data_25 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_25)
sum_data_50 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_50)
sum_data_cov[1, 2:5] <- sum_data_cov[2:5, 1] <- 0.2
sum_data_cov_5 <- sum_data
sum_data_cov[1, 2:6] <- sum_data_cov[2:6, 1] <- 0.2
sum_data_cov_5 <- sum_data
sum_data_cov_5 <- sum_data_cov
sum_data_cov[1, 2:11] <- sum_data_cov[2:11, 1] <- 0.2
sum_data_cov_10 <- sum_data_cov
sum_data_cov[1, 2:26] <- sum_data_cov[2:26, 1] <- 0.2
sum_data_cov_25 <- sum_data_cov
sum_data_cov[1, 2:51] <- sum_data_cov[2:51, 1] <- 0.2
sum_data_cov_50 <- sum_data_cov
sum_data_5 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_5)
sum_data_10 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_10)
sum_data_25 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_25)
sum_data_50 <- mvrnorm(100, mu = rep(0, 200), Sigma = sum_data_cov_50)
library("MASS")
bmat <- matrix(1:4, nrow = 2)
bmat
bmat * c(1, 2)
sweep(bmat, 2, "*")
sweep(bmat, 2, FUN = "*")
sweep(bmat, 2, c(1, 2), FUN = "*")
abs_max <- function(x) max(abs(x))
quit(save = "yes")
